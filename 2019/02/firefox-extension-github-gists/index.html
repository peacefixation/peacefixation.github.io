<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.74.2 with theme Tranquilpeak 0.4.8-BETA">
<meta name="author" content="Matt Jarvis">
<meta name="keywords" content="">
<meta name="description" content="I store snippets of code with Github Gists to remind myself how to do things that I don&rsquo;t do regularly enough to remember off hand. At first it was only a few, but my list is growing and as it grows it becomes harder to find the one I want. I&rsquo;ve made myself a little Firefox extension to list all my Gists with a search field so I can quickly locate them.">


<meta property="og:description" content="I store snippets of code with Github Gists to remind myself how to do things that I don&rsquo;t do regularly enough to remember off hand. At first it was only a few, but my list is growing and as it grows it becomes harder to find the one I want. I&rsquo;ve made myself a little Firefox extension to list all my Gists with a search field so I can quickly locate them.">
<meta property="og:type" content="article">
<meta property="og:title" content="Firefox Extension: Github Gists">
<meta name="twitter:title" content="Firefox Extension: Github Gists">
<meta property="og:url" content="https://peacefixation.github.io/2019/02/firefox-extension-github-gists/">
<meta property="twitter:url" content="https://peacefixation.github.io/2019/02/firefox-extension-github-gists/">
<meta property="og:site_name" content="Matt Jarvis">
<meta property="og:description" content="I store snippets of code with Github Gists to remind myself how to do things that I don&rsquo;t do regularly enough to remember off hand. At first it was only a few, but my list is growing and as it grows it becomes harder to find the one I want. I&rsquo;ve made myself a little Firefox extension to list all my Gists with a search field so I can quickly locate them.">
<meta name="twitter:description" content="I store snippets of code with Github Gists to remind myself how to do things that I don&rsquo;t do regularly enough to remember off hand. At first it was only a few, but my list is growing and as it grows it becomes harder to find the one I want. I&rsquo;ve made myself a little Firefox extension to list all my Gists with a search field so I can quickly locate them.">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2019-02-06T19:49:45">
  
  
    <meta property="article:modified_time" content="2019-02-06T19:49:45">
  
  
  
    
      <meta property="article:section" content="development">
    
  
  
    
      <meta property="article:tag" content="development">
    
      <meta property="article:tag" content="firefox">
    
  


<meta name="twitter:card" content="summary">











  <meta property="og:image" content="https://www.gravatar.com/avatar/9b52a10544df0260f8eab84b3bbea4bb?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/9b52a10544df0260f8eab84b3bbea4bb?s=640">


    <title>Firefox Extension: Github Gists</title>

    <link rel="icon" href="https://peacefixation.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://peacefixation.github.io/2019/02/firefox-extension-github-gists/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://peacefixation.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://peacefixation.github.io/">Matt Jarvis</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://peacefixation.github.io/#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/9b52a10544df0260f8eab84b3bbea4bb?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://peacefixation.github.io/#about">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/9b52a10544df0260f8eab84b3bbea4bb?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Matt Jarvis</h4>
        
          <h5 class="sidebar-profile-bio">I write software and love music</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://peacefixation.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://peacefixation.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://peacefixation.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://peacefixation.github.io/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/peacefixation" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://stackoverflow.com/users/966798/matt" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://peacefixation.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Firefox Extension: Github Gists
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2019-02-06T19:49:45&#43;11:00">
        
  February 6, 2019

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://peacefixation.github.io/categories/development">development</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>I store snippets of code with Github Gists to remind myself how to do things that I don&rsquo;t do regularly enough to remember off hand. At first it was only a few, but my list is growing and as it grows it becomes harder to find the one I want. I&rsquo;ve made myself a little Firefox extension to list all my Gists with a search field so I can quickly locate them.</p>
<p>Making a Firefox extension is easier than ever since they&rsquo;ve adopted the same API as Chrome. There&rsquo;s no more XUL; it&rsquo;s all Javascript, HTML and CSS and you can get something up and running in no time.</p>
<p>My spec was short and sweet:</p>
<ul>
<li>get the user&rsquo;s Github repo</li>
<li>search Github for the Gists</li>
<li>provide a browser button with a popup that shows the Gists in a list</li>
<li>filter the list with a search field</li>
<li>open a Gist in a new window when clicked</li>
</ul>
<p>Inspection of the Github API reveals two distinct options. The v3 REST API and a new v4 GraphQL API that doesn&rsquo;t have as many features, at least as far as Gists are concerned. You can retrieve metadata but not the contents of a Gist and there&rsquo;s no mutation features (create, edit, etc). I&rsquo;m not writing a Gist editor and I was curious about GraphQL so I decided to use the GraphQL API for this extension.</p>
<p>With my spec defined and a broad overview in mind, it&rsquo;s time to create a basic extension.</p>
<h2 id="manifest">Manifest</h2>
<p>An extension requires a <code>manifest.json</code> file to describe itself to the browser. Here&rsquo;s the manifest for my Firefox extension with some comments to describe each section.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
    <span style="color:#e6db74">&#34;manifest_version&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>, <span style="color:#75715e">// always 2
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Github Gists&#34;</span>, <span style="color:#75715e">// the extension name
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;version&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;0.4&#34;</span>, <span style="color:#75715e">// the extension version (important for updates to work correctly)
</span><span style="color:#75715e"></span>
    <span style="color:#e6db74">&#34;description&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Search your Github Gists&#34;</span>,

    <span style="color:#75715e">// various icons for use by Firefox
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;icons&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;32&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;icons/GitHub-Mark-32px.png&#34;</span>,
        <span style="color:#e6db74">&#34;64&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;icons/GitHub-Mark-64px.png&#34;</span>,
        <span style="color:#e6db74">&#34;120&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;icons/GitHub-Mark-120px-plus.png&#34;</span>
    },

    <span style="color:#75715e">// the background page, launches when the addon launches and persists while the browser is open and the extension is enabled
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;background&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;scripts&#34;</span><span style="color:#f92672">:</span> [
            <span style="color:#e6db74">&#34;js/background.js&#34;</span>
        ]
    },

    <span style="color:#75715e">// the options page for the extension in about:addons
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;options_ui&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;page&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;html/options.html&#34;</span>
    },

    <span style="color:#75715e">// a button that opens a popup
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;browser_action&#34;</span><span style="color:#f92672">:</span> {
		<span style="color:#e6db74">&#34;default_title&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Gists&#34;</span>,
		<span style="color:#e6db74">&#34;default_icon&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;icons/GitHub-Mark-64px.png&#34;</span>, <span style="color:#75715e">// the button icon
</span><span style="color:#75715e"></span>		<span style="color:#e6db74">&#34;default_popup&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;html/menu.html&#34;</span> <span style="color:#75715e">// the popup page
</span><span style="color:#75715e"></span>	},

    <span style="color:#75715e">// a unique id to identify the extension
</span><span style="color:#75715e"></span>    <span style="color:#e6db74">&#34;applications&#34;</span><span style="color:#f92672">:</span> {
        <span style="color:#e6db74">&#34;gecko&#34;</span><span style="color:#f92672">:</span> {
          <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;gists@peacefixation&#34;</span>
        }
      }
}
</code></pre></div>
<h2 id="background-page">Background Page</h2>
<p>The background &ldquo;page&rdquo; is a JavaScript file that runs in the background and is the engine of the extension that does the work of sending web requests and keeps track of state. The other pages interact with the background page with <code>chrome.extension.getBackgroundPage()</code> when they need to initiate a web request to retrieve new data, or access state.</p>
<p>My background page has a method to download Gists and store them in memory, and an accessor method to get the Gists that were downloaded. The download method executes an AJAX request to the Github API with a GraphQL query. The GraphQL query will return a maximum of 100 Gists. To retrieve more, you must request a cursor that indicates the end of the page that you retrieved, and a boolean variable that indicates if any more pages are available, then send a new request with a parameter called <code>after</code> that is populated with the cursor. In this way you can retrieve pages of 100 Gists at a time until there are no more pages. I decided to limit the number of requests that I send to 10 so that I don&rsquo;t spam the API too hard, so my extension will display a maximum of 1000 Gists which I hope is reasonable.</p>
<p>Github&rsquo;s API documentation includes a section on <a href="https://developer.github.com/v4/guides/forming-calls/">writing GraphQL queries</a> and a section on the format of the <a href="https://developer.github.com/v4/object/gist/">Gist object</a> that you can request. I crafted my own query with variables to retrieve the first <code>x</code> Gists after the given cursor.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">query</span> (<span style="color:#a6e22e">$first</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Int</span>, <span style="color:#a6e22e">$after</span><span style="color:#f92672">:</span> String) { <span style="color:#a6e22e">viewer</span> { <span style="color:#a6e22e">gists</span>(<span style="color:#a6e22e">first</span><span style="color:#f92672">:</span><span style="color:#a6e22e">$first</span>, <span style="color:#a6e22e">after</span><span style="color:#f92672">:</span><span style="color:#a6e22e">$after</span>, <span style="color:#a6e22e">privacy</span><span style="color:#f92672">:</span><span style="color:#a6e22e">ALL</span>) { <span style="color:#a6e22e">edges</span> { <span style="color:#a6e22e">node</span> { <span style="color:#a6e22e">id</span> <span style="color:#a6e22e">description</span> <span style="color:#a6e22e">name</span> <span style="color:#a6e22e">pushedAt</span> <span style="color:#a6e22e">owner</span> { <span style="color:#a6e22e">resourcePath</span> } } } <span style="color:#a6e22e">pageInfo</span> { <span style="color:#a6e22e">endCursor</span> <span style="color:#a6e22e">hasNextPage</span> } } } }
</code></pre></div>
<p>To retrieve the Gists I craft an AJAX request to the Github API and include the Authorization header with a personal access token. Each user must create a personal access token from their own Github account to give the extension permission to access it on their behalf. I send the request, and if there are more pages available, I send another request recursively until no more pages are available or I reach my maxRequests limit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">requestGists</span>(<span style="color:#a6e22e">first</span>, <span style="color:#a6e22e">after</span>) {
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">xhttp</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">XMLHttpRequest</span>();
    
    <span style="color:#a6e22e">xhttp</span>.<span style="color:#a6e22e">onreadystatechange</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
        <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">readyState</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">4</span>) {
            
            <span style="color:#a6e22e">localStorage</span>[<span style="color:#e6db74">&#34;requestStatus&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">status</span>;

            <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">status</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">200</span>) {
                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">json</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">responseText</span>);

                <span style="color:#75715e">// if the errors field is populated stop requesting more gists
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">json</span>[<span style="color:#e6db74">&#34;errors&#34;</span>]) {
                    <span style="color:#a6e22e">localStorage</span>[<span style="color:#e6db74">&#34;requestStatus&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">json</span>[<span style="color:#e6db74">&#34;errors&#34;</span>][<span style="color:#ae81ff">0</span>][<span style="color:#e6db74">&#34;message&#34;</span>];
                    <span style="color:#a6e22e">browser</span>.<span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">sendMessage</span>({<span style="color:#e6db74">&#34;action&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;checkStatus&#34;</span>});
                    <span style="color:#66d9ef">return</span>;
                }

                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">hasNextPage</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">json</span>[<span style="color:#e6db74">&#34;data&#34;</span>][<span style="color:#e6db74">&#34;viewer&#34;</span>][<span style="color:#e6db74">&#34;gists&#34;</span>][<span style="color:#e6db74">&#34;pageInfo&#34;</span>][<span style="color:#e6db74">&#34;hasNextPage&#34;</span>];
                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">endCursor</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">json</span>[<span style="color:#e6db74">&#34;data&#34;</span>][<span style="color:#e6db74">&#34;viewer&#34;</span>][<span style="color:#e6db74">&#34;gists&#34;</span>][<span style="color:#e6db74">&#34;pageInfo&#34;</span>][<span style="color:#e6db74">&#34;endCursor&#34;</span>];

                <span style="color:#75715e">// append the new gists
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">json</span>[<span style="color:#e6db74">&#34;data&#34;</span>][<span style="color:#e6db74">&#34;viewer&#34;</span>][<span style="color:#e6db74">&#34;gists&#34;</span>][<span style="color:#e6db74">&#34;edges&#34;</span>].<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
                    <span style="color:#a6e22e">gists</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">json</span>[<span style="color:#e6db74">&#34;data&#34;</span>][<span style="color:#e6db74">&#34;viewer&#34;</span>][<span style="color:#e6db74">&#34;gists&#34;</span>][<span style="color:#e6db74">&#34;edges&#34;</span>][<span style="color:#a6e22e">i</span>]);
                }

                <span style="color:#75715e">// keep requesting gists while there are more pages
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">hasNextPage</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">true</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">requestNum</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">maxRequests</span>) {
                    <span style="color:#a6e22e">requestNum</span><span style="color:#f92672">++</span>;
                    <span style="color:#a6e22e">requestGists</span>(<span style="color:#ae81ff">100</span>, <span style="color:#a6e22e">endCursor</span>);
                }
            }

            <span style="color:#a6e22e">browser</span>.<span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">sendMessage</span>({<span style="color:#e6db74">&#34;action&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;checkStatus&#34;</span>});
        }
    };

    <span style="color:#a6e22e">xhttp</span>.<span style="color:#a6e22e">open</span>(<span style="color:#e6db74">&#34;POST&#34;</span>, <span style="color:#e6db74">&#34;https://api.github.com/graphql&#34;</span>, <span style="color:#66d9ef">true</span>);
    <span style="color:#a6e22e">xhttp</span>.<span style="color:#a6e22e">setRequestHeader</span>(<span style="color:#e6db74">&#34;Authorization&#34;</span>, <span style="color:#e6db74">&#34;Bearer &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">localStorage</span>[<span style="color:#e6db74">&#34;token&#34;</span>]);
    <span style="color:#a6e22e">xhttp</span>.<span style="color:#a6e22e">setRequestHeader</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;application/json&#34;</span>);
 
     <span style="color:#75715e">// the GraphQL query
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">query</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;query ($first: Int, $after: String) { viewer { gists(first:$first, after:$after, privacy:ALL) { edges { node { id description name pushedAt owner { resourcePath } } } pageInfo { endCursor hasNextPage } } } }&#34;</span>
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">request</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>({
        <span style="color:#a6e22e">query</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">query</span>,
        <span style="color:#a6e22e">variables</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">first</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">first</span>, <span style="color:#a6e22e">after</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">after</span> }
    });

    <span style="color:#a6e22e">xhttp</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">request</span>);
}
</code></pre></div>
<h2 id="menu-page">Menu Page</h2>
<p>The menu page is shown when the browser button is pressed. It&rsquo;s a simple HTML page with some JavaScript to control it (add/remove DOM elements, event handler for search function).</p>
<h2 id="options-page">Options Page</h2>
<p>The options page is shown on the Firefox <code>about:addons</code> page and is another simple HTML page with accompanying JavaScript. You can open the options page programatically by calling <code>browser.runtime.openOptionsPage()</code>. In my menu page I show a message if the user&rsquo;s Github token is invalid and provide a link that opens the Options page.</p>
<h2 id="development-and-debugging">Development and debugging</h2>
<p>You can load your extension temporarily on the <code>about:debugging</code> page. Press the &ldquo;Load Temporary Addon-on&hellip;&rdquo; button and select your <code>manifest.json</code> file from the file browser. Once loaded you can open a JavaScript console by pressing the &ldquo;Debug&rdquo; button. If you make changes to your code you can reload the extension by pressing the &ldquo;Reload&rdquo; button.</p>
<p>If you&rsquo;re interested in learning more see the <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions">Firefox developer documentation</a>. You can find the source code for my extension on <a href="https://github.com/peacefixation/firefox-github-gists">Github</a>. You can install the extension from the <a href="https://addons.mozilla.org/en-US/firefox/addon/github-gists/">Firefox addons page</a>.</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://peacefixation.github.io/tags/development/">development</a>

  <a class="tag tag--primary tag--small" href="https://peacefixation.github.io/tags/firefox/">firefox</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://peacefixation.github.io/2020/04/transcend-isolation-a-dj-mix/" data-tooltip="Transcend Isolation: a DJ mix">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://peacefixation.github.io/2017/09/clean-sql-embedded-in-source-files-with-vim/" data-tooltip="Clean SQL embedded in source files with Vim">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://peacefixation.github.io/2019/02/firefox-extension-github-gists/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://peacefixation.github.io/2019/02/firefox-extension-github-gists/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://peacefixation.github.io/2019/02/firefox-extension-github-gists/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Matt Jarvis. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://peacefixation.github.io/2020/04/transcend-isolation-a-dj-mix/" data-tooltip="Transcend Isolation: a DJ mix">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://peacefixation.github.io/2017/09/clean-sql-embedded-in-source-files-with-vim/" data-tooltip="Clean SQL embedded in source files with Vim">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://peacefixation.github.io/2019/02/firefox-extension-github-gists/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://peacefixation.github.io/2019/02/firefox-extension-github-gists/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://peacefixation.github.io/2019/02/firefox-extension-github-gists/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fpeacefixation.github.io%2F2019%2F02%2Ffirefox-extension-github-gists%2F">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fpeacefixation.github.io%2F2019%2F02%2Ffirefox-extension-github-gists%2F">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3A%2F%2Fpeacefixation.github.io%2F2019%2F02%2Ffirefox-extension-github-gists%2F">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/9b52a10544df0260f8eab84b3bbea4bb?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Matt Jarvis</h4>
    
      <div id="about-card-bio">I write software and love music</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Developer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Australia
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://peacefixation.github.io/images/Mt_Beauty_3_LG.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://peacefixation.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  




    
  </body>
</html>

